
## P 90 触摸屏原理介绍

##### 触摸屏简介
触摸屏又称触控面板，它是一种把触摸位置转化成坐标数据的输入设备，根据触摸屏的检测原理，主要分为电阻式触摸屏和电容式触摸屏。
相对来说，电阻屏造价便宜，能适应较恶劣的环境，但它只支持单点触控(一次只能检测面板上的一个触摸位置)，触摸时需要一定的压力，使用久了容易造成表面磨损，影响寿命；
而电容屏具有支持多点触控、检测精度高的特点，电容屏通过与导电物体产生的电容效应来检测触摸动作，只能感应导电物体的触摸，湿度较大或屏幕表面有水珠时会影响电容屏的检测效果。

![[../../annex/19.电阻触摸屏_image_1.png]]

![[../../annex/19.电阻触摸屏_image_2.png]]

电阻触摸屏及电容触摸屏的两种屏幕，从外观上并没有明显的区别，区分电阻屏与电容屏最直接的方法就是使用绝缘物体点击屏幕，因为电阻屏通过压力能正常检测触摸动作，而该绝缘物体无法影响电容屏所检测的信号，因而无法检测到触摸动作。目前电容式触摸屏被大部分应用在智能手机、平板电脑等电子设备中，而在汽车导航、工控机等设备中电阻式触摸屏仍占主流。

##### 电阻式触摸屏检测原理
电阻式的触摸屏结构如下图，它主要由表面硬涂层、两个 ITO 层、间隔点以及玻璃底层构成，这些结构层都是透明的，整个触摸屏覆盖在液晶面板上，透过触摸屏可看到液晶面板。表面涂层起到保护作用，玻璃底层起承载的作用，而两个 ITO 层是触摸屏的关键结构，它们是涂有铟锡金属氧化物的导电层。两个 ITO 层之间使用间隔点使两层分开，当触摸屏表面受到压力时，表面弯曲使得上层 ITO 与下层 ITO 接触，在触点处连通电路。

![[../../annex/19.电阻触摸屏_image_3.png]]

两个 ITO 涂层的两端分别引出 X-、X+、Y-、Y+四个电极，这是电阻屏最常见的四线结构，通过这些电极，外部电路向这两个涂层可以施加匀强电场或检测电压。

![[../../annex/19.电阻触摸屏_image_4.png]]

当触摸屏被按下时，两个 ITO 层相互接触，从触点处把 ITO 层分为两个电阻，且由于 ITO 层均匀导电，两个电阻的大小与触点离两电极的距离成比例关系，利用这个特性，可通过以下过程来检测坐标，这也正是电阻触摸屏名称的由来。

![[../../annex/19.电阻触摸屏_image_5.png]]

```
计算X坐标时，在X+电极施加驱动电压Vref，X-极接地，所以X+与X-处形成了匀强电场，而触点处的电压通过Y+电极采集得到，由于ITO层均匀导电，触点电压与Vref之比等于触点X坐标与屏宽度之比，从而：
x=V_Y+/V_ref×Widtℎ

计算Y坐标时，在Y+电极施加驱动电压Vref，Y-极接地，所以Y+与Y-处形成了匀强电场，而触点处的电压通过X+电极采集得到，由于ITO层均匀导电，触点电压与Vref之比等于触点Y坐标与屏高度之比，从而：
y=V_Y+/V_ref×Heigℎt

```

![[../../annex/19.电阻触摸屏_image_6.png]]

为了方便检测触摸的坐标，一些芯片厂商制作了电阻屏专用的控制芯片，控制上述采集过程、采集电压，外部微控制器直接与触摸控制芯片通讯直接获得触点的电压或坐标。

我们生产的这款3.2寸电阻触摸屏就是采用 XPT2046芯片作为触摸控制芯片，XPT2046芯片控制4线电阻触摸屏，STM32与 XPT2046采用 SPI 通讯获取采集得的电压，然后转换成坐标。

![[../../annex/19.电阻触摸屏_image_7.png]]


##### 电容式触摸屏检测原理

与电阻式触摸屏不同，电容式触摸屏不需要通过压力使触点变形，再通过触点处电压值来检测坐标，它的基本原理和前面定时器章节中介绍的电容按键类似，都是利用充电时间检测电容大小，从而通过检测出电容值的变化来获知触摸信号。

电容屏的最上层是玻璃(不会像电阻屏那样形变)，核心层部分也是由 ITO 材料构成的，这些导电材料在屏幕里构成了人眼看不见的静电网，静电网由多行 X 轴电极和多列 Y 轴电极构成，两个电极之间会形成电容。触摸屏工作时，X 轴电极发出 AC 交流信号，而交流信号能穿过电容，即通过 Y 轴能感应出该信号，当交流电穿越时电容会有充放电过程，检测该充电时间可获知电容量。若手指触摸屏幕，会影响触摸点附近两个电极之间的耦合，从而改变两个电极之间的电容量，若检测到某电容的电容量发生了改变，即可获知该电容处有触摸动作（这就是为什么它被称为电容式触摸屏以及绝缘体触摸没有反应的原因）。

![[../../annex/19.电阻触摸屏_image_8.png]]

电容屏 ITO 层的结构如下图，这是比较常见的形式，电极由多个菱形导体组成，生产时使用蚀刻工艺在 ITO 层生成这样的结构。

![[../../annex/19.电阻触摸屏_image_9.png]]

X 轴电极与 Y 轴电极在交叉处形成电容，即这两组电极构成了电容的两极，这样的结构覆盖了整个电容屏，每个电容单元在触摸屏中都有其特定的物理位置，即电容的位置就是它在触摸屏的 XY 坐标。检测触摸的坐标时，第1条 X 轴的电极发出激励信号，而所有 Y 轴的电极同时接收信号，通过检测充电时间可检测出各个 Y 轴与第1条 X 轴相交的各个互电容的大小，各个 X 轴依次发出激励信号，重复上述步骤，即可得到整个触摸屏二维平面的所有电容大小。当手指接近时，会导致局部电容改变，根据得到的触摸屏电容量变化的二维数据表，可以得知每个触摸点的坐标，因此电容触摸屏支持多点触控。

其实电容触摸屏可看作是多个电容按键组合而成，就像机械按键中独立按键和矩阵按键的关系一样，甚至电容触摸屏的坐标扫描方式与矩阵按键都是很相似的。










































































































































































































