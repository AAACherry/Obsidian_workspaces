
## P 43 常用存储器

CPU 做常用的运算，运算处理的数据从存储器中来，CPU 本身是不具有存储功能的。


![[../../annex/常用存储器_image_1.png]]

### 01 存储器的种类

![[../../annex/常用存储器_image_2.png]]

![[../../annex/常用存储器_image_3.png]]
易失和非易失是指掉电之后数据是否还能正常保存

弹幕：这个是为了后面的 eeprom 打基础的，讲的都是存储器的类型

###### 易失性
为什么还要有易失性存储器？
易失性存储器相对而言读写的速度较快。
易失性存储器的一种应用：内存条。把数据缓存起来，才能跟上 CPU 的速度。（内容未保存时就是缓存在内存条中。）
Flash 起到一个作用：掉电保存我们的程序数据。
而内存（内部 SRAM）：CPU 在运行的时候，一些缓冲的数据也是放到内部 SRAM 中的（变量、数组元素等，都是暂时存储在内部 SRAM 中的，为了缓存数据，加快运算。）。

指南者（100 个引脚）和霸道（144 个引脚）最大的区别就是 SRAM。多出来的很多引脚用来扩展外部 SRAM（扩展内存）。（相当于给电脑加多一条内存条）

###### 非易失性
非易失性一般分为 ROM 和 Flash，是半导体类的。
不局限于半导体类的有很多，如光盘、软盘、机械硬盘。这些存储介质都不是半导体（不是 MOS 管、硅等）。如机械硬盘是使用磁体的（一个小颗粒是否被磁化来表示数据 0 和 1）。光盘就是在光盘的介质中加一个凹槽（凹槽长短表示数据 0 和 1）。

MASK ROM ，第一代存储器。没法用 STM 32 去读写。
PROM，可编程的 ROM。
OTPROM，可以写一次的 ROM
EPROM，可以用高电擦除的 ROM
EEPROM，用比较低的电压 （3.3 V）都可以擦除内部数据写入数据的 ROM
ROM--read  only  memory

FLASH--U 盘、SSD 硬盘。
相对于 ROM，存储空间更大，现在用的比较广泛。
NOR FLASH，主要用来存储程序
NAND FLASH，一般用来存储数据
SSD 硬盘比机械硬盘快。SSD 硬盘空间相对机械硬盘比较小


### 02 RAM 存储器

![[../../annex/常用存储器_image_4.png]]

RAM 存储器--Random Access Memory，随机存储器

磁鼓：圆柱形存储器。读取某个数据的话，要把磁鼓旋转到某个位置才能够（经过某个数据，经过很多圈）读取某个数据。读取不同位置的数据所需的时间不一样。

后来发明随机存储器，不管读的数据放在第 0 个还是第 100 个地址, 读取到的时间都是一样的。
RAM 现在已经专门用于指代作为计算机内存的易失性半导体存储器。

根据 RAM 的存储机制，分为：
动态随机存储器 DRAM（Dynamic RAM）
静态随机存储器 SRAM（Static RAM）


![[../../annex/常用存储器_image_5.png]]
一个电容、一个 MOS 管，通过 MOS 管来充放电，电压为 3.3 V 就代表逻辑 1，电压为 0 就代表逻辑 0
是否刷新--充电的过程，防止电容放电会导致错误，需要一个刷新

![[../../annex/常用存储器_image_6.png]]

![[../../annex/常用存储器_image_7.png]]

![[../../annex/常用存储器_image_8.png]]

DRAM 采用同步通讯，SRAM 采用异步通讯。

![[../../annex/常用存储器_image_9.png]]
SDRAM，是动态存储器（DRAM），前面的 S 是指同步。
DDRAMII SDRAM 的改进：上升沿和下降沿都可以采集有效数据，所以在同一个时钟的驱动下，能够传输 2 个数据位。那么它的数据就在高电平期间发生变化。（上升沿被采样，高电平时间表示数据无效。）跟普通的 SDRAM 比能够提升一倍的数据传输效率。（不需要提高时钟频率也能提高一倍数据传输效率）
而 DDRAM3 SDRAM 比 DDRAM2 SDRAM 时钟频率高一倍。

![[../../annex/常用存储器_image_10.png]]
SRAM 采用异步，所以不会有前缀了（不采用 SSRAM），前面的 S 指 static 而不是同步的意思。


![[../../annex/常用存储器_image_11.png]]
ROM --read only memory，只读存储器
实际上不是不能写，是出厂前先固定好了数据，没法用 STM 32 去改写它的数据。

MASH ROM--掩码 ROM--出厂时固化，任何办法都没有修改。
OTPROM--出厂时没有写入任何数据，可以让用户写入一次，之后不可修改。（熔丝，保险丝）
EPROM--erase 可重复擦写的 ROM，需要用专门的紫外线照射设备擦除。
EEPROM--可重复擦写，电擦除，使用方便（前面的 E 表示电）


![[../../annex/常用存储器_image_12.png]]
SSD 一般是 NAND FLASH
NOR FLASH 相比 NAND FLASH 有一个特性：XIP。（程序在片上执行的功能）
XIP 就是说像 CPU ，通过命令线发一个指令，然后通过数据线来接收一些数据。地址线和数据线是分开的，可以直接把一些指令读取回来去执行。方便读取。可以以字节为单位来读写。
因为 NAND FLASH 读取数据的时候没法分开地址线和数据线，必须以块的单位来读写。所以不支持 XIP。

NOR FLASH 比 NAND FLASH 坏块少，且可重复写很多次。
生产的时候不可避免有一些存储单元块是坏的。通过校验（一种机制）来处理某些存储单元是坏的。（8 G 可能做出来是 7.9 G 等）
在 NOR FLASH，这种坏块就比较少。
而且 NAND FLASH 如果重复写入（不断的往同一个存储单元写入内容的话），那个存储单元很快就会坏掉。所以 SSD 硬盘一般会有一个机制叫读写均衡，不会让你拼命的写同一个单元，而是分布写不同的存储单元。

NOR FLASH 是随机存储的，可以以字节为单位读写。
NAND FLASH 是连续存储的，必须以块为单位读写。

弹幕：norflash 成本较高，由于其可以以“字节”读写，常用于51、stm32等单片机中；nandflash 成本较低，以“块”读写，容量大，常用于 SSD，U 盘等存储设备；

FLASH 和 ROM 最大的区别就是擦除数据的时候 FLASH 必须以块才擦除（每个块可能是 512 个字节）。EPROM 等是能够以字节为单位擦除数据的。
在写入之前都必须进行擦除（没法直接从 0->1 或者 1->0），把所有的存储单元都擦除成 1。在把需要写 0 的位置写 0 ，为 1 的地方就不用改了。

STM 32 一般是 NOR FLASH。STM 32 扩展 SD 卡的时候，用到 NAND FLASH，但是只管 SD 卡就行了，不用管 NAND FLASH。




### 03 非易失性存储器





