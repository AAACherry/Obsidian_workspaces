
###### 寄存器的概念
根据每个单元功能的不同，以功能为名给这个内存单元取一个别名， 这个别名就是我们经常说的寄存器

###### 寄存器映射
给存储器分配地址的过程就称为存储器映射；给存储器再分配一个地址就叫存储器重映射。
给已经分配好地址的有特定功能的内存单元取别名的过程就叫寄存器映射。

###### 复位值的概念

[STM32 学习笔记(寄存器)---2 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/206476640)
**所谓的复位值，就是指如果没有操作这个寄存器时，寄存器存放的默认值。**.
![[../../annex/补充_image_1.png]]


[stm32寄存器的复位值是什么意思？？ - STM32/STM8技术论坛 - 电子技术论坛 - 广受欢迎的专业电子论坛! (elecfans.com)](https://bbs.elecfans.com/jishu_1866010_1_1.html)
复位后，寄存器的值会恢复到一个初定的值，即复位值，保证复位后每个功能模块的状态都在一个已知的情况
![[../../annex/补充_image_2.png]]


###### “复用”
“复用功能输出”中的“复用”是指STM32的其它片上外设对GPIO引脚进行控制，此时GPIO引脚用作该外设功能的一部分，算是第二用途

###### IO 前缀--volatile

```//寄存器的值常常是芯片外设自动更改的，即使CPU没有执行程序，也有可能发生变化
//编译器有可能会对没有执行程序的变量进行优化

//volatile表示易变的变量，防止编译器优化，
#define     __IO    volatile
typedef unsigned int uint32_t;
typedef unsigned short uint16_t;

// GPIO 寄存器结构体定义
typedef struct
{
    __IO uint32_t CRL;       // 端口配置低寄存器，     地址偏移0X00
    __IO uint32_t CRH;       // 端口配置高寄存器，     地址偏移0X04
    __IO uint32_t IDR;       // 端口数据输入寄存器，   地址偏移0X08
    __IO uint32_t ODR;       // 端口数据输出寄存器，   地址偏移0X0C
    __IO uint32_t BSRR;      // 端口位设置/清除寄存器，地址偏移0X10
    __IO uint32_t BRR;       // 端口位清除寄存器，     地址偏移0X14
    __IO uint32_t LCKR;      // 端口配置锁定寄存器，   地址偏移0X18
} GPIO_TypeDef;

这段代码在每个结构体成员前增加了一个“__IO”前缀，它的原型在这段代码的第一行，代表了 C 语言中的关键字“volatile”，在 C 语言中该关键字用于表示变量是易变的，要求编译器不要优化。这些结构体内的成员，都代表着寄存器，而寄存器很多时候是由外设或 STM32芯片状态修改的，也就是说即使 CPU 不执行代码修改这些变量，变量的值也有可能被外设修改、更新，所以每次使用这些变量的时候，我们都要求 CPU 去该变量的地址重新访问。若没有这个关键字修饰，在某些情况下，编译器认为没有代码修改该变量，就直接从 CPU 的某个缓存获取该变量值，这时可以加快执行速度，但该缓存中的是陈旧数据，与我们要求的寄存器最新状态可能会有出入。
```






































