
## P 69 SRAM 芯片简介

![[../../annex/FSMC--扩展外部SRAM_image_1.png|目录]]

![[../../annex/FSMC--扩展外部SRAM_image_2.png|SRAM控制原理]]

程序本身的空间占用很大才扩展 nand flash。程序运行的时候使用到的很多的内存/变量都是放在内存里面的。

![[../../annex/FSMC--扩展外部SRAM_image_3.png|SRAM芯片外观]]
44 个引脚。

![[../../annex/FSMC--扩展外部SRAM_image_4.png|SRAM芯片内部功能框图]]
SRAM，易失性存储器。掉电数据丢失，但是运行速度非常快。
1、512K X 16存储器矩阵--具有 SRAM 性质的一些存储单元
2、地址译码器--把我们输入的一些地址对存储空间进行寻址
3、数据电路
4、列 I/O
5、控制电路


![[../../annex/FSMC--扩展外部SRAM_image_5.png|SRAM信号线]]
1、A 0~A 18 地址输入，用来访问指定的存储空间。
2、I/O 0-I/O 7 数据输入输出信号，低字节。I/O 可以理解为 SPI 的 MOSI 和 MISO 线，或 SDA 线。
3、I/8 0-I/O 15 数据输入输出信号，高字节
4、CS 2 和 CS 1# 片选信号线，CS 2 高电平有效，CS 1# 低电平有效。控制这个引脚并使能，芯片才能进行读写。
5、OE# 输出使能信号，低电平有效。（相对于 SRAM 而言，也就是说它能够对外返回数据）
6、WE# 写入使能，低电平有效。
7、UB# 数据掩码信号 Upper Byte，高位字节允许访问，低电平有效。
8、LB# 数据掩码信号 Lower Byte，低位字节允许访问，低电平有效。

```
#号相当于低电平有效。
```
SRAM 的控制比较简单，只要控制信号线使能了访问，从地址线输入要访问的地址，即可从 I/O 数据线写入或读出数据


![[../../annex/FSMC--扩展外部SRAM_image_6.png|SRAM存储矩阵]]

![[../../annex/FSMC--扩展外部SRAM_image_7.png|地址译码器、列I/O及I/O数据电路]]
A0~A18。9 根地址线一共可以表示 2<sup>19</sup>=2<sup>9</sup>X 1024=512 K 行存储单元。
所以一共能访问 512K X 16 bits =512K X 2 B （1 MB）大小的空间。
![[../../annex/FSMC--扩展外部SRAM_image_8.png]]
512 代表能够寻址 512 K 行，16 代表数据宽度（每一行能够保存多少个数据位）

一次访问两个字节（512 K 行，1 MB）
比如写入 0 地址的时候，实际上可以访问第 0 个字节以及第 1 个字节。（0 地址访问第 0、1 个字节，用 1 地址访问第 2、3 个字节）
地址线是针对一行地址寻址的，实际上一次访问 2 个字节。
那么我们可以通过 UB # 和 LB# 这两根线来指定。
U-upper，UB 线搞成高电平，就表示 I/O 8~I/O 15 中表示的内容是无效的。LB 线搞成低电平，就代表 I/O 0~I/O 7 数据线是有效的。
如果想同时修改两个字节，就将 UB 线和 LB 线都拉成低电平。
实际上，UB 线和 LB 线的作用也就在于此，就是它们是用来控制 I/O 口表示的数据是有效还是无效的。相当于是用来控制数据线的宽度。

控制电路部分
片选信号 CS 1 和 CS 2，是相反的。
OE 相当于是读使能
WE 相当于是写使能
UB 和 LB 也是防止误操作，只想操作一个字节的时候，防止 SRAM 把所有内容都拷贝进去。

SRAM 是不需要定时刷新的，这是和 SDRAM 的主要区别。



SRAM 是没有时钟线的，所以说其实是异步通讯，跟 IIC 和 SPI 不同。
![[../../annex/FSMC--扩展外部SRAM_image_9.png|SRAM读过程时序图]]
通过大家协调好的时间参数来协调通讯。
一般来说，在片选信号有效之后过了一定时间应当把读有效信号拉成低电平（使能有效信号）。

![[../../annex/FSMC--扩展外部SRAM_image_10.png]]
Taa 就是给出地址之后到数据出现（返回数据的过程）的一个时间。
TDOE 就是给出 OE 信号之后，数据信号输出的一个时间。

![[../../annex/FSMC--扩展外部SRAM_image_11.png|速度型号]]

![[../../annex/FSMC--扩展外部SRAM_image_12.png]]
根据这个图，t<sub>rc</sub>>55 ns 可以得知读取一个字节/两个字节的过程不能低于 55 ns。
T<sub>AA</sub><55 ns，没有最低值，我们可以控制 taa=33 ns，我们在 33 ns 后对数据进行采样。
T<sub>DOE</sub><25 ns，没有最低值要求，我们就可以确认，给出 OE 信号之后，T<sub>DOE</sub>不能超过 25 ns（在 25 ns 内读取 data 进行采样）。



![[../../annex/FSMC--扩展外部SRAM_image_13.png|SRAM写过程时序图]]





























#### B 站 AI 视频总结

如何使用 STM 32 芯片扩展内存，包括使用 SRAM 芯片和 FSMC 控制器，以及实验步骤。
00:01 介绍使用 STM 32 芯片扩展内存的方法
02:02 分成四个部分讲解 SDRAM 控制原理和使用
03:21  STM 32 芯片内部的 SRAM 相当于电脑内存，可扩展以满足程序需求

- 存储器矩阵、地址译码器、控制电路等半导体芯片的核心内容, 包括地址线、数据线、片选引脚等。
10:00 返回数据，涉及地址线、数据线和片选引脚
10:19 信号线分为地址线和数据线
13:50 STM 32 F 103 存储器矩阵不需要列地址，只需要输入行地址寻址

- SRAM 的控制电路和时序, 包括地址线、片选信号、读写使能信号等, 以及数据传输的过程。
20:00 解释了 ub 和 Ib 电平的作用
22:41 介绍了控制电路的作用和配合时序图使用
26:05 讲解了 sram 的异步通讯方式和时序，需要协调好地址线和片选信号

- 数据信号的读取过程和时间要求包括 tlc、taa、tde 等参数对于写数据也有类似的要求。
30:00 数据信号输出保持一定时间
31:14 读取过程需要等待特定时间
34:32 读取访问过程必须不低于 55 纳秒

- 关于 SRAM 芯片的信号和时序细节, 以及使用 STM 32 控制 SRAM 芯片的相关内容。
40:02 必须超过 55 纳秒，然后看其他 t p w 1
40:36 ts d 至少为 25 纳秒，th d 最小值为零
42:34 调整程序时间参数，查看芯片手册，关注 55纳秘






































































































































